<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–ª–∏–∞—Å - –ò–≥—Ä–∞ –¥–ª—è Telegram</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary-color: #3390ec;
            --secondary-color: #2ea043;
            --background-color: #f5f5f5;
            --card-color: #ffffff;
            --text-color: #333333;
            --border-radius: 12px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 2px solid var(--primary-color);
            margin-bottom: 30px;
        }
        
        h1 {
            color: var(--primary-color);
            margin: 0;
            font-size: 2.5rem;
        }
        
        .game-area {
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 25px;
            margin-bottom: 25px;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .word-display {
            font-size: 2.8rem;
            text-align: center;
            font-weight: bold;
            margin: 20px 0;
            color: var(--primary-color);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .description-area {
            margin: 25px 0;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: var(--border-radius);
            border: 2px dashed #ddd;
        }
        
        .description-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .description-header h3 {
            margin: 0;
            color: var(--primary-color);
        }
        
        .word-counter {
            background-color: #e3f2fd;
            color: var(--primary-color);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .word-counter.limit-exceeded {
            background-color: #ffebee;
            color: #d32f2f;
        }
        
        .description-input {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1rem;
            font-family: inherit;
            resize: vertical;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }
        
        .description-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .description-input.limit-exceeded {
            border-color: #d32f2f;
            background-color: #fff5f5;
        }
        
        .description-hint {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #666;
            text-align: center;
        }
        
        .description-example {
            margin-top: 15px;
            padding: 10px;
            background-color: #e8f5e9;
            border-radius: 8px;
            font-size: 0.9rem;
            color: #2e7d32;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .success-btn {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .skip-btn {
            background-color: #f0f0f0;
            color: #666;
        }
        
        .start-btn {
            background-color: var(--primary-color);
            color: white;
            width: 100%;
            font-size: 1.3rem;
            padding: 18px;
        }
        
        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        button:active:not(:disabled) {
            transform: translateY(0);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .timer {
            font-size: 2.5rem;
            text-align: center;
            font-weight: bold;
            margin: 20px 0;
            color: #e53935;
        }
        
        .score-board {
            display: flex;
            justify-content: space-between;
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 25px;
        }
        
        .score-item {
            text-align: center;
            flex: 1;
        }
        
        .score-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .score-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }
        
        .instructions {
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            margin-top: 20px;
        }
        
        .instructions h3 {
            margin-top: 0;
            color: var(--primary-color);
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 10px;
        }
        
        .game-status {
            text-align: center;
            font-size: 1.2rem;
            margin: 15px 0;
            color: #666;
        }
        
        .player-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .player-tag {
            background-color: #e3f2fd;
            color: var(--primary-color);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .telegram-info {
            text-align: center;
            margin-top: 30px;
            padding: 15px;
            background-color: #e8f4fd;
            border-radius: var(--border-radius);
            color: #2a7bc1;
        }
        
        .telegram-info a {
            color: #3390ec;
            font-weight: 600;
            text-decoration: none;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .word-display {
                font-size: 2.2rem;
            }
            
            .controls {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
        }
        
        .hidden {
            display: none !important;
        }
        
        .game-state {
            display: none;
        }
        
        .game-state.active {
            display: block;
        }
        
        .description-history {
            margin-top: 30px;
            background-color: #f9f9f9;
            border-radius: var(--border-radius);
            padding: 15px;
        }
        
        .history-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .history-item {
            margin-bottom: 10px;
            padding: 10px;
            background-color: white;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }
        
        .history-word {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .history-description {
            margin-top: 5px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-comments"></i> –û—á–∫–æ –µ–±–∞–Ω–æ–µ</h1>
            <p>–û–±—ä—è—Å–Ω—è–π—Ç–µ —Å–ª–æ–≤–∞ –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –æ—á–∫–∏!</p>
        </header>
        
        <div id="startState" class="game-state active">
            <div class="game-area">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É –ê–ª–∏–∞—Å!</h2>
                <p>–¶–µ–ª—å –∏–≥—Ä—ã: –æ–±—ä—è—Å–Ω—è—Ç—å —Å–ª–æ–≤–∞ —Å–≤–æ–∏–º –¥—Ä—É–∑—å—è–º, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—è –æ–¥–Ω–æ–∫–æ—Ä–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞. –ó–∞ –∫–∞–∂–¥–æ–µ —É–≥–∞–¥–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ 1 –æ—á–∫–æ.</p>
                
                <div class="score-board">
                    <div class="score-item">
                        <div class="score-value" id="roundCount">1</div>
                        <div class="score-label">–†–ê–£–ù–î</div>
                    </div>
                    <div class="score-item">
                        <div class="score-value" id="totalScore">0</div>
                        <div class="score-label">–û–ß–ö–û–í</div>
                    </div>
                    <div class="score-item">
                        <div class="score-value" id="playerCount">1</div>
                        <div class="score-label">–ò–ì–†–û–ö–û–í</div>
                    </div>
                </div>
                
                <div class="player-list">
                    <div class="player-tag">–í—ã</div>
                </div>
                
                <div class="game-status">
                    <p>–ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É", —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–ª–æ–≤!</p>
                </div>
                
                <button id="startGame" class="start-btn">
                    <i class="fas fa-play"></i> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                </button>
            </div>
            
            <div class="instructions">
                <h3><i class="fas fa-info-circle"></i> –ö–∞–∫ –∏–≥—Ä–∞—Ç—å:</h3>
                <ul>
                    <li>–û–±—ä—è—Å–Ω—è–π—Ç–µ —Å–ª–æ–≤–æ, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—è –æ–¥–Ω–æ–∫–æ—Ä–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞</li>
                    <li><strong>–ù–∞–ø–∏—à–∏—Ç–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤ –ø–æ–ª–µ (–º–∞–∫—Å–∏–º—É–º 5 —Å–ª–æ–≤)</strong></li>
                    <li>–ù–∞ –∫–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ –¥–∞–µ—Ç—Å—è 60 —Å–µ–∫—É–Ω–¥</li>
                    <li>–ù–∞–∂–º–∏—Ç–µ "–£–≥–∞–¥–∞–ª–∏", –µ—Å–ª–∏ —Å–ª–æ–≤–æ –æ—Ç–≥–∞–¥–∞–Ω–æ</li>
                    <li>–ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å", —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ª–æ–≤—É</li>
                    <li>–ò–≥—Ä–∞–π—Ç–µ –ø–æ –æ—á–µ—Ä–µ–¥–∏ —Å –¥—Ä—É–∑—å—è–º–∏</li>
                </ul>
            </div>
            
            <div class="telegram-info">
                <p><i class="fab fa-telegram"></i> <strong>–î–ª—è –∏–≥—Ä—ã –≤ –±–µ—Å–µ–¥–µ Telegram:</strong></p>
                <p>–î–æ–±–∞–≤—å—Ç–µ <a href="https://t.me/alias_game_bot" target="_blank">@alias_game_bot</a> –≤ –±–µ—Å–µ–¥—É –∏ –Ω–∞—á–Ω–∏—Ç–µ –∏–≥—Ä—É!</p>
            </div>
        </div>
        
        <div id="gameState" class="game-state">
            <div class="game-area">
                <div class="timer" id="timer">60</div>
                <div class="word-display" id="currentWord">–°–ª–æ–≤–æ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</div>
                
                <div class="description-area">
                    <div class="description-header">
                        <h3><i class="fas fa-edit"></i> –í–∞—à–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ:</h3>
                        <div class="word-counter" id="wordCounter">0/5 —Å–ª–æ–≤</div>
                    </div>
                    <textarea 
                        id="descriptionInput" 
                        class="description-input" 
                        placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —ç—Ç–æ–≥–æ —Å–ª–æ–≤–∞ (–º–∞–∫—Å–∏–º—É–º 5 —Å–ª–æ–≤). –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å–ª–æ–≤–∞ '—è–±–ª–æ–∫–æ': —Ñ—Ä—É–∫—Ç, –∫—Ä—É–≥–ª–æ–µ, —Ä–∞—Å—Ç–µ—Ç –Ω–∞ –¥–µ—Ä–µ–≤–µ, –±—ã–≤–∞–µ—Ç –∫—Ä–∞—Å–Ω–æ–µ –∏–ª–∏ –∑–µ–ª–µ–Ω–æ–µ, —Å–æ—á–Ω–æ–µ..."
                        maxlength="200"
                    ></textarea>
                    <div class="description-hint" id="descriptionHint">
                        <i class="fas fa-lightbulb"></i> –ü–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å —É–ª–æ–∂–∏—Ç—å—Å—è –≤ 5 —Å–ª–æ–≤ –∏–ª–∏ –º–µ–Ω—å—à–µ
                    </div>
                    
                    <div id="descriptionExample" class="description-example hidden">
                        <strong>–ü—Ä–∏–º–µ—Ä –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–ª–æ–≤–∞:</strong> <span id="exampleText"></span>
                    </div>
                </div>
                
                <div class="game-status">
                    <p>–ù–∞–ø–∏—à–∏—Ç–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–ª–æ–≤–∞, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ "–£–≥–∞–¥–∞–ª–∏" –∏–ª–∏ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"</p>
                </div>
                
                <div class="controls">
                    <button id="skipWord" class="skip-btn">
                        <i class="fas fa-forward"></i> –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å
                    </button>
                    <button id="guessWord" class="success-btn" disabled>
                        <i class="fas fa-check"></i> –£–≥–∞–¥–∞–ª–∏
                    </button>
                </div>
            </div>
            
            <div class="score-board">
                <div class="score-item">
                    <div class="score-value" id="gameScore">0</div>
                    <div class="score-label">–û–ß–ö–û–í –í –†–ê–£–ù–î–ï</div>
                </div>
                <div class="score-item">
                    <div class="score-value" id="gameWords">0</div>
                    <div class="score-label">–û–ë–™–Ø–°–ù–ï–ù–û –°–õ–û–í</div>
                </div>
                <div class="score-item">
                    <div class="score-value" id="gameSkipped">0</div>
                    <div class="score-label">–ü–†–û–ü–£–©–ï–ù–û</div>
                </div>
            </div>
            
            <div class="description-history">
                <div class="history-title">
                    <i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
                </div>
                <div id="historyList">
                    <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
            </div>
            
            <div class="game-status">
                <p>–°–µ–π—á–∞—Å –æ–±—ä—è—Å–Ω—è–µ—Ç: <strong id="currentPlayer">–í—ã</strong></p>
            </div>
            
            <button id="endGame" class="start-btn" style="background-color: #e53935;">
                <i class="fas fa-stop"></i> –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞—É–Ω–¥
            </button>
        </div>
        
        <div id="endState" class="game-state">
            <div class="game-area">
                <h2>–†–∞—É–Ω–¥ –∑–∞–≤–µ—Ä—à–µ–Ω!</h2>
                <p>–û—Ç–ª–∏—á–Ω–∞—è –∏–≥—Ä–∞! –í–æ—Ç –≤–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:</p>
                
                <div class="score-board">
                    <div class="score-item">
                        <div class="score-value" id="finalScore">0</div>
                        <div class="score-label">–ù–ê–ë–†–ê–ù–û –û–ß–ö–û–í</div>
                    </div>
                    <div class="score-item">
                        <div class="score-value" id="finalWords">0</div>
                        <div class="score-label">–û–ë–™–Ø–°–ù–ï–ù–û –°–õ–û–í</div>
                    </div>
                    <div class="score-item">
                        <div class="score-value" id="finalTime">60</div>
                        <div class="score-label">–û–°–¢–ê–í–®–ï–ï–°–Ø –í–†–ï–ú–Ø</div>
                    </div>
                </div>
                
                <div class="description-history">
                    <div class="history-title">
                        <i class="fas fa-award"></i> –õ—É—á—à–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è —Ä–∞—É–Ω–¥–∞
                    </div>
                    <div id="bestDescriptions">
                        <!-- –õ—É—á—à–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                    </div>
                </div>
                
                <div class="game-status">
                    <p>–ü–µ—Ä–µ–¥–∞–π—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å–ª–µ–¥—É—é—â–µ–º—É –∏–≥—Ä–æ–∫—É –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞—É–Ω–¥–∞!</p>
                </div>
                
                <button id="newRound" class="start-btn">
                    <i class="fas fa-redo"></i> –ù–æ–≤—ã–π —Ä–∞—É–Ω–¥
                </button>
                
                <button id="newGame" class="start-btn" style="background-color: #666; margin-top: 15px;">
                    <i class="fas fa-home"></i> –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ
                </button>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram?.WebApp;
        
        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let gameState = 'start'; // start, game, end
        let score = 0;
        let round = 1;
        let wordsExplained = 0;
        let wordsSkipped = 0;
        let timeLeft = 60;
        let timerInterval = null;
        let currentWordIndex = 0;
        let descriptionHistory = [];
        let wordExamples = {};
        
        // –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤ –¥–ª—è –∏–≥—Ä—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
        const wordList = [
            {word: "–∫–æ–ª–¥—É–Ω", example: "–æ–Ω –º–∞–≥ –Ω–∞—Ö—É–π"},
            {word: "–∫–æ–º–ø—É—Ö—Ç–µ—Ä", example: "—Ç–µ–ª–µ—Ñ–æ–Ω –≥—Ä–∞–º–∞—Ñ–æ–Ω"},
            {word: "–Æ–ª—è", example: "—Å —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –ø–æ –ø–æ–¥—Ä–æ–±–Ω–µ–π"},
            {word: "–æ–∫–µ–∞–Ω", example: "–≤–æ–¥–∞, –º–æ—Ä–µ, –±–æ–ª—å—à–æ–π, –≥–ª—É–±–∏–Ω–∞, –≤–æ–ª–Ω—ã"},
            {word: "–≥–æ—Ä—ã", example: "–≤—ã—Å–æ–∫–∏–µ, –≤–µ—Ä—à–∏–Ω—ã, —Å–Ω–µ–≥, –ø—Ä–∏—Ä–æ–¥–∞, –≤–æ—Å—Ö–æ–∂–¥–µ–Ω–∏–µ"},
            {word: "–∫–Ω–∏–≥–∞", example: "—á—Ç–µ–Ω–∏–µ, —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∏—Å—Ç–æ—Ä–∏—è, –∞–≤—Ç–æ—Ä, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞"},
            {word: "–º—É–∑—ã–∫–∞", example: "–∑–≤—É–∫–∏, –º–µ–ª–æ–¥–∏—è, –ø–µ—Å–Ω—è, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —Ä–∏—Ç–º"},
            {word: "–∫–∏–Ω–æ", example: "—Ñ–∏–ª—å–º, —ç–∫—Ä–∞–Ω, –∞–∫—Ç–µ—Ä—ã, —Å—é–∂–µ—Ç, –ø–æ–ø–∫–æ—Ä–Ω"},
            {word: "—Å–ø–æ—Ä—Ç", example: "–ó –û –ñ"},
            {word: "–µ–¥–∞", example: "–ø—Ä–æ–¥—É–∫—Ç—ã, –ø–∏—Ç–∞–Ω–∏–µ, –≤–∫—É—Å, –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ, –æ–±–µ–¥"},
            {word: "–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ", example: "–ø–æ–µ–∑–¥–∫–∞, –æ—Ç–¥—ã—Ö, –Ω–æ–≤—ã–µ –º–µ—Å—Ç–∞, —á–µ–º–æ–¥–∞–Ω, –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è"},
            {word: "–¥—Ä—É–∂–±–∞", example: "–æ—Ç–Ω–æ—à–µ–Ω–∏—è, –¥–æ–≤–µ—Ä–∏–µ, –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –æ–±—â–µ–Ω–∏–µ, –≤–µ—Ä–Ω–æ—Å—Ç—å"},
            {word: "–ª—é–±–æ–≤—å", example: "—á—É–≤—Å—Ç–≤–æ, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å, —Ä–æ–º–∞–Ω—Ç–∏–∫–∞, —Å–µ—Ä–¥—Ü–µ, –æ—Ç–Ω–æ—à–µ–Ω–∏—è"},
            {word: "—Ä–∞–±–æ—Ç–∞", example: "–¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∑–∞—Ä–ø–ª–∞—Ç–∞, –æ—Ñ–∏—Å, –∑–∞–¥–∞—á–∏, –∫–æ–ª–ª–µ–≥–∏"},
            {word: "—É—á—ë–±–∞", example: "–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –∑–Ω–∞–Ω–∏—è, —à–∫–æ–ª–∞, —É—Ä–æ–∫–∏, —ç–∫–∑–∞–º–µ–Ω—ã"}
        ];
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const startState = document.getElementById('startState');
        const gameStateEl = document.getElementById('gameState');
        const endState = document.getElementById('endState');
        const currentWordEl = document.getElementById('currentWord');
        const timerEl = document.getElementById('timer');
        const gameScoreEl = document.getElementById('gameScore');
        const gameWordsEl = document.getElementById('gameWords');
        const gameSkippedEl = document.getElementById('gameSkipped');
        const totalScoreEl = document.getElementById('totalScore');
        const roundCountEl = document.getElementById('roundCount');
        const playerCountEl = document.getElementById('playerCount');
        const finalScoreEl = document.getElementById('finalScore');
        const finalWordsEl = document.getElementById('finalWords');
        const finalTimeEl = document.getElementById('finalTime');
        const currentPlayerEl = document.getElementById('currentPlayer');
        const descriptionInput = document.getElementById('descriptionInput');
        const wordCounter = document.getElementById('wordCounter');
        const descriptionHint = document.getElementById('descriptionHint');
        const descriptionExample = document.getElementById('descriptionExample');
        const exampleText = document.getElementById('exampleText');
        const historyList = document.getElementById('historyList');
        const bestDescriptions = document.getElementById('bestDescriptions');
        const guessWordBtn = document.getElementById('guessWord');
        
        // –ö–Ω–æ–ø–∫–∏
        const startGameBtn = document.getElementById('startGame');
        const skipWordBtn = document.getElementById('skipWord');
        const endGameBtn = document.getElementById('endGame');
        const newRoundBtn = document.getElementById('newRound');
        const newGameBtn = document.getElementById('newGame');
        
        // –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ–≤–∞—Ä—è –ø—Ä–∏–º–µ—Ä–æ–≤
        wordList.forEach(item => {
            wordExamples[item.word] = item.example;
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        if (tg) {
            tg.ready();
            tg.expand();
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
            const user = tg.initDataUnsafe?.user;
            
            if (user) {
                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ –∏–º—è
                const playerList = document.querySelector('.player-list');
                const playerTag = document.createElement('div');
                playerTag.className = 'player-tag';
                playerTag.textContent = `${user.first_name || '–ò–≥—Ä–æ–∫'} ${user.last_name || ''}`;
                playerList.appendChild(playerTag);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∏–≥—Ä–æ–∫–æ–≤
                playerCountEl.textContent = '1';
                currentPlayerEl.textContent = user.first_name || '–í—ã';
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ —Å–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ
        function countWords(text) {
            if (!text.trim()) return 0;
            return text.trim().split(/\s+/).length;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ —Å–ª–æ–≤
        function updateWordCounter() {
            const text = descriptionInput.value;
            const wordCount = countWords(text);
            
            wordCounter.textContent = `${wordCount}/5 —Å–ª–æ–≤`;
            
            if (wordCount > 5) {
                wordCounter.classList.add('limit-exceeded');
                descriptionInput.classList.add('limit-exceeded');
                descriptionHint.innerHTML = `<i class="fas fa-exclamation-triangle"></i> –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–ª–æ–≤! –ú–∞–∫—Å–∏–º—É–º 5 —Å–ª–æ–≤.`;
                descriptionHint.style.color = '#d32f2f';
                guessWordBtn.disabled = true;
            } else if (wordCount === 0) {
                wordCounter.classList.remove('limit-exceeded');
                descriptionInput.classList.remove('limit-exceeded');
                descriptionHint.innerHTML = `<i class="fas fa-lightbulb"></i> –ü–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å —É–ª–æ–∂–∏—Ç—å—Å—è –≤ 5 —Å–ª–æ–≤ –∏–ª–∏ –º–µ–Ω—å—à–µ`;
                descriptionHint.style.color = '#666';
                guessWordBtn.disabled = true;
            } else {
                wordCounter.classList.remove('limit-exceeded');
                descriptionInput.classList.remove('limit-exceeded');
                descriptionHint.innerHTML = `<i class="fas fa-lightbulb"></i> –û—Ç–ª–∏—á–Ω–æ! ${wordCount} –∏–∑ 5 —Å–ª–æ–≤`;
                descriptionHint.style.color = '#2e7d32';
                guessWordBtn.disabled = false;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é
        function addToHistory(word, description, guessed) {
            const historyItem = {
                word,
                description,
                guessed,
                timestamp: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
            };
            
            descriptionHistory.push(historyItem);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
            updateHistoryDisplay();
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏
        function updateHistoryDisplay() {
            historyList.innerHTML = '';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∑–∞–ø–∏—Å–µ–π
            const recentHistory = descriptionHistory.slice(-5).reverse();
            
            recentHistory.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                
                const statusIcon = item.guessed ? '<i class="fas fa-check-circle" style="color: #2e7d32; margin-right: 5px;"></i>' : 
                                                  '<i class="fas fa-forward" style="color: #666; margin-right: 5px;"></i>';
                
                historyItem.innerHTML = `
                    <div>
                        ${statusIcon} <span class="history-word">${item.word}</span> 
                        <span style="font-size: 0.8rem; color: #999; margin-left: 10px;">${item.timestamp}</span>
                    </div>
                    <div class="history-description">${item.description || '–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ –≤–≤–µ–¥–µ–Ω–æ'}</div>
                `;
                
                historyList.appendChild(historyItem);
            });
            
            // –ï—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            if (descriptionHistory.length === 0) {
                historyList.innerHTML = '<div style="text-align: center; color: #999; padding: 20px;">–ó–¥–µ—Å—å –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –≤–∞—à–∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è</div>';
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª—É—á—à–∏—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
        function showBestDescriptions() {
            bestDescriptions.innerHTML = '';
            
            // –§–∏–ª—å—Ç—Ä—É–µ–º —É–≥–∞–¥–∞–Ω–Ω—ã–µ —Å–ª–æ–≤–∞
            const guessedWords = descriptionHistory.filter(item => item.guessed);
            
            if (guessedWords.length === 0) {
                bestDescriptions.innerHTML = '<div style="text-align: center; color: #999; padding: 10px;">–ù–µ—Ç —É–≥–∞–¥–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤ –≤ —ç—Ç–æ–º —Ä–∞—É–Ω–¥–µ</div>';
                return;
            }
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–ª–∏–Ω–µ –æ–ø–∏—Å–∞–Ω–∏—è (—Å–∞–º—ã–µ –∫–æ—Ä–æ—Ç–∫–∏–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ)
            const sortedByLength = [...guessedWords].sort((a, b) => {
                const aWords = a.description ? countWords(a.description) : 0;
                const bWords = b.description ? countWords(b.description) : 0;
                return aWords - bWords;
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ø-3 –ª—É—á—à–∏—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
            const topDescriptions = sortedByLength.slice(0, 3);
            
            topDescriptions.forEach((item, index) => {
                const descriptionItem = document.createElement('div');
                descriptionItem.className = 'history-item';
                
                const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : 'ü•â';
                
                descriptionItem.innerHTML = `
                    <div>
                        <span style="font-size: 1.2rem; margin-right: 5px;">${medal}</span>
                        <span class="history-word">${item.word}</span>
                    </div>
                    <div class="history-description">${item.description}</div>
                    <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">
                        ${item.description ? countWords(item.description) : 0} —Å–ª–æ–≤–∞
                    </div>
                `;
                
                bestDescriptions.appendChild(descriptionItem);
            });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–º–µ–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        function setGameState(state) {
            gameState = state;
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            startState.classList.remove('active');
            gameStateEl.classList.remove('active');
            endState.classList.remove('active');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            if (state === 'start') {
                startState.classList.add('active');
            } else if (state === 'game') {
                gameStateEl.classList.add('active');
                startGame();
            } else if (state === 'end') {
                endState.classList.add('active');
                showResults();
                showBestDescriptions();
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
        function startGame() {
            // –°–±—Ä–æ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–∞—É–Ω–¥–∞
            wordsExplained = 0;
            wordsSkipped = 0;
            timeLeft = 60;
            descriptionHistory = [];
            
            // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è –≤–≤–æ–¥–∞
            descriptionInput.value = '';
            updateWordCounter();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            gameScoreEl.textContent = '0';
            gameWordsEl.textContent = '0';
            gameSkippedEl.textContent = '0';
            timerEl.textContent = timeLeft;
            timerEl.style.color = '#e53935';
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
            updateHistoryDisplay();
            
            // –í—ã–±–æ—Ä —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–ª–æ–≤–∞
            getNewWord();
            
            // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(updateTimer, 1000);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞
        function updateTimer() {
            timeLeft--;
            timerEl.textContent = timeLeft;
            
            if (timeLeft <= 10) {
                timerEl.style.color = '#e53935';
                timerEl.style.animation = timeLeft <= 5 ? 'pulse 0.5s infinite alternate' : 'none';
            } else if (timeLeft <= 30) {
                timerEl.style.color = '#ff9800';
            } else {
                timerEl.style.color = '#4caf50';
            }
            
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                setGameState('end');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–ª–æ–≤–∞
        function getNewWord() {
            let newIndex;
            do {
                newIndex = Math.floor(Math.random() * wordList.length);
            } while (newIndex === currentWordIndex && wordList.length > 1);
            
            currentWordIndex = newIndex;
            const currentWordObj = wordList[currentWordIndex];
            currentWordEl.textContent = currentWordObj.word;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–º–µ—Ä –æ–±—ä—è—Å–Ω–µ–Ω–∏—è (—Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 30%)
            if (Math.random() < 0.3) {
                exampleText.textContent = currentWordObj.example;
                descriptionExample.classList.remove('hidden');
            } else {
                descriptionExample.classList.add('hidden');
            }
            
            // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è –≤–≤–æ–¥–∞ –∏ —Å–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞
            descriptionInput.value = '';
            updateWordCounter();
            descriptionInput.focus();
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function showResults() {
            finalScoreEl.textContent = score;
            finalWordsEl.textContent = wordsExplained;
            finalTimeEl.textContent = timeLeft;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–∏–π —Å—á–µ—Ç
            totalScoreEl.textContent = score;
            roundCountEl.textContent = round;
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        startGameBtn.addEventListener('click', () => {
            setGameState('game');
        });
        
        skipWordBtn.addEventListener('click', () => {
            const currentWord = wordList[currentWordIndex].word;
            const description = descriptionInput.value.trim();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
            addToHistory(currentWord, description, false);
            
            wordsSkipped++;
            gameSkippedEl.textContent = wordsSkipped;
            getNewWord();
        });
        
        guessWordBtn.addEventListener('click', () => {
            const currentWord = wordList[currentWordIndex].word;
            const description = descriptionInput.value.trim();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
            addToHistory(currentWord, description, true);
            
            score++;
            wordsExplained++;
            gameScoreEl.textContent = score;
            gameWordsEl.textContent = wordsExplained;
            getNewWord();
        });
        
        endGameBtn.addEventListener('click', () => {
            clearInterval(timerInterval);
            setGameState('end');
        });
        
        newRoundBtn.addEventListener('click', () => {
            round++;
            setGameState('game');
        });
        
        newGameBtn.addEventListener('click', () => {
            // –°–±—Ä–æ—Å –≤—Å–µ–π –∏–≥—Ä—ã
            score = 0;
            round = 1;
            descriptionHistory = [];
            totalScoreEl.textContent = '0';
            roundCountEl.textContent = '1';
            setGameState('start');
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞
        descriptionInput.addEventListener('input', updateWordCounter);
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è Enter (–Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ Shift+Enter)
        descriptionInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                if (!guessWordBtn.disabled) {
                    guessWordBtn.click();
                }
            }
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        totalScoreEl.textContent = score;
        roundCountEl.textContent = round;
        updateHistoryDisplay();
        
        // –î–æ–±–∞–≤–ª—è–µ–º CSS –∞–Ω–∏–º–∞—Ü–∏—é –¥–ª—è –ø—É–ª—å—Å–∞—Ü–∏–∏ —Ç–∞–π–º–µ—Ä–∞
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                from { opacity: 1; }
                to { opacity: 0.5; }
            }
        `;
        document.head.appendChild(style);
        
        // –°–∏–º—É–ª—è—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        setTimeout(() => {
            if (Math.random() > 0.5) {
                const playerList = document.querySelector('.player-list');
                const newPlayer = document.createElement('div');
                newPlayer.className = 'player-tag';
                newPlayer.textContent = '–î—Ä—É–≥';
                playerList.appendChild(newPlayer);
                playerCountEl.textContent = '2';
            }
        }, 1000);
        
        // –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Telegram
        console.log("–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Telegram:");
        console.log("1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather");
        console.log("2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É /alias –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã");
        console.log("3. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –±–µ—Å–µ–¥—É –¥–ª—è –∏–≥—Ä—ã —Å –¥—Ä—É–∑—å—è–º–∏");
        console.log("4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Web App API –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã");
    </script>
</body>
</html>
